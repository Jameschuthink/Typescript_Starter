# Docker Launch Guide for Typescript Starter

This guide provides the basic commands and steps to launch the Docker container for the Typescript Starter application.

## Prerequisites

- Docker installed on your system
- Docker daemon running
- Basic familiarity with command line

## Basic Docker Commands

### 1. Build the Docker Image

```bash
# Navigate to the project directory
cd /home/james/Documents/Typescript_Starter

# Build the Docker image
DOCKER_BUILDKIT=1 docker build -t typescript-starter .
```

**Flags explanation:**
- `-t typescript-starter`: Tags the image with name "typescript-starter"
- `.`: Build context is the current directory

### 2. Run the Docker Container

```bash
# Run the container
docker run -d -p 8080:8080 --name typescript-starter-container typescript-starter
```

**Flags explanation:**
- `-d`: Run container in detached mode (background)
- `-p 8080:8080`: Map host port 8080 to container port 8080
- `--name typescript-starter-container`: Name the container
- `typescript-starter`: The image to run

### 3. Verify Container is Running

```bash
# Check running containers
docker ps

# Check container logs
docker logs typescript-starter-container
```

### 4. Access the Application

Once the container is running, you can access the application at:
- **URL**: `http://localhost:8080`
- **Health check endpoint**: `http://localhost:8080/api/health`
- **API documentation**: `http://localhost:8080/api-docs`

## Advanced Commands

### Environment Variables

The application uses environment variables. You can override defaults by:

```bash
# Create a .env file (optional)
cat > .env << EOF
NODE_ENV=production
HOST=localhost
PORT=8080
CORS_ORIGIN=http://localhost:8080
COMMON_RATE_LIMIT_MAX_REQUESTS=1000
COMMON_RATE_LIMIT_WINDOW_MS=1000
EOF

# Or pass environment variables directly
docker run -d -p 8080:8080 \
  -e NODE_ENV=production \
  -e PORT=8080 \
  -e HOST=localhost \
  --name typescript-starter-container \
  typescript-starter
```

### Volume Mounting (for development)

```bash
# Mount current directory for live code changes
docker run -d -p 8080:8080 \
  -v $(pwd):/app \
  -v /app/node_modules \
  --name typescript-starter-dev \
  typescript-starter
```

### Container Management

```bash
# Stop the container
docker stop typescript-starter-container

# Start the container
docker start typescript-starter-container

# Remove the container
docker rm typescript-starter-container

# Remove the image
docker rmi typescript-starter

# View resource usage
docker stats typescript-starter-container
```

### Debugging

```bash
# Enter the running container
docker exec -it typescript-starter-container sh

# Check running processes inside container
docker top typescript-starter-container

# Inspect container details
docker inspect typescript-starter-container
```

## Docker Compose (Alternative)

If you prefer using Docker Compose, create a `docker-compose.yml` file:

```yaml
version: '3.8'

services:
  app:
    build: .
    ports:
      - "8080:8080"
    environment:
      - NODE_ENV=production
      - PORT=8080
      - HOST=localhost
    restart: unless-stopped
```

Then run:
```bash
docker-compose up -d
```

## Troubleshooting

**Common issues and solutions:**

1. **Port already in use**: Change the host port mapping (`-p 8081:8080`)
2. **Build failures**: Ensure all dependencies are installed locally first (`pnpm install`)
3. **Permission issues**: Use `--user $(id -u):$(id -g)` flag in docker run
4. **Missing .env file**: The app has defaults, but you can create one as shown above

## Default Configuration

The application comes with sensible defaults:
- **Port**: 8080
- **Environment**: production
- **CORS Origin**: http://localhost:8080
- **Rate Limiting**: 1000 requests per 1000ms window

## Next Steps

After launching, you can:
1. Test the health endpoint: `curl http://localhost:8080/api/health`
2. Explore the API documentation at `http://localhost:8080/api-docs`
3. Check the logs: `docker logs -f typescript-starter-container`
